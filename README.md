Домашнее задание к занятию «Компоненты Kubernetes»

1. Расчёт всех необходимых ресурсов
   База данных (DB)

       ОЗУ: 4 ГБ * 3 копии = 12 ГБ
       CPU: 1 ядро * 3 копии = 3 ядра

   Система кеширования (Cache)

        ОЗУ: 4 ГБ * 3 копии = 12 ГБ
        CPU: 1 ядро * 3 копии = 3 ядра

   Фронтенд (Frontend)

        ОЗУ: 50 МБ * 5 копий = 250 МБ (≈ 0.25 ГБ)
        CPU: 0.2 ядра * 5 копий = 1 ядро

   Бекенд (Backend)

        ОЗУ: 600 МБ * 10 копий = 6000 МБ (≈ 6 ГБ)
        CPU: 1 ядро * 10 копий = 10 ядер

2. Подсчёт ресурсов для всех приложений

         Общая потребность в ОЗУ:
         DB: 12 ГБ
         Cache: 12 ГБ
         Frontend: 0.25 ГБ
         Backend: 6 ГБ
         Итого: 12 + 12 + 0.25 + 6 = 30.25 ГБ
      
         Общая потребность в CPU:
         DB: 3 ядра
         Cache: 3 ядра
         Frontend: 1 ядро
         Backend: 10 ядер
         Итого: 3 + 3 + 1 + 10 = 17 ядер

3. Количество рабочих нод (worker nodes)

   Допустим, каждая рабочая нода имеет следующие характеристики:

       ОЗУ: 16 ГБ
       CPU: 8 ядер

   Для покрытия необходимых ресурсов:

       Память: 30.25 ГБ / 16 ГБ ≈ 2 ноды
       Процессоры: 17 ядер / 8 ядер ≈ 3 ноды

4. Запас для отказоустойчивости

   Учитываем запас для выхода из строя одной ноды:

       Память: 30.25 ГБ + 16 ГБ = 46.25 ГБ
       CPU: 17 ядер + 8 ядер = 25 ядер

   Необходимое количество нод с учётом запаса:

       Память: 46.25 ГБ / 16 ГБ ≈ 3 ноды
       Процессоры: 25 ядер / 8 ядер ≈ 4 ноды

5. Служебные ресурсы

   Добавляем служебные ресурсы для операционных систем и Kubernetes компонентов на каждую ноду:

       Минимальные требования для каждой ноды: 1 ядро и 512 МБ RAM.

   Пересчёт с учётом служебных ресурсов:

       Дополнительная память: 512 МБ * 4 = 2 ГБ
       Дополнительные процессоры: 1 ядро * 4 = 4 ядра

   Итоговые значения:

       Память: 46.25 ГБ + 2 ГБ = 48.25 ГБ
       CPU: 25 ядер + 4 ядра = 29 ядер

   Необходимое количество нод:

       Память: 48.25 ГБ / 16 ГБ ≈ 3 ноды
       Процессоры: 29 ядер / 8 ядер ≈ 4 ноды

   Итоговое количество нод и их параметры

   На основании всех расчетов, для обеспечения отказоустойчивости и поддержки необходимых ресурсов, потребуется:

       Количество нод: 4
       Параметры каждой ноды:
           ОЗУ: 16 ГБ
           CPU: 8 ядер

   ### **Заключение**

   >Рассчитанные параметры кластера должны покрыть все требования проекта с запасом для отказоустойчивости и учётом служебных нужд. В реальной эксплуатации конфигурацию можно будет скорректировать, опираясь на данные мониторинга о реальном потреблении ресурсов.